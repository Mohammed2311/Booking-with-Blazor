#pragma checksum "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "3b8cab26912c774ebb2d452d35f5aef19c5d3314"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorServer.Pages.HotelRoom
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using BlazorServer;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using BlazorServer.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using BlazorServer.Pages.LearnBlazorComponants;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using Busniss.Interfaces;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\_Imports.razor"
using BlazorServer.Helper;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
using BlazorServer.Services.IServices;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/hotel-room/create")]
    [Microsoft.AspNetCore.Components.RouteAttribute("/hotel-room/edit/{id:int}")]
    public partial class UpsertRoom : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "row");
            __builder.OpenElement(2, "h3");
            __builder.AddAttribute(3, "class", "card-title text-info");
            __builder.AddContent(4, 
#nullable restore
#line 13 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                      Title

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(5, " Hotel Room");
            __builder.CloseElement();
            __builder.AddMarkupContent(6, "\r\n    ");
            __builder.OpenElement(7, "div");
            __builder.AddAttribute(8, "class", "col-md-12");
            __builder.OpenElement(9, "div");
            __builder.OpenElement(10, "div");
            __builder.AddAttribute(11, "class", "card-body");
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Forms.EditForm>(12);
            __builder.AddAttribute(13, "Model", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#nullable restore
#line 17 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                 HotelRoom

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(14, "OnValidSubmit", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Forms.EditContext>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Forms.EditContext>(this, 
#nullable restore
#line 17 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                           HandleHotelRoom

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(15, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.DataAnnotationsValidator>(16);
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(17, "\r\n                    ");
                __builder2.OpenElement(18, "div");
                __builder2.AddAttribute(19, "class", "form-group");
                __builder2.AddMarkupContent(20, "<label> Hotel Room Name</label>\r\n                        ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.InputText>(21);
                __builder2.AddAttribute(22, "class", "form-control");
                __builder2.AddAttribute(23, "Value", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 21 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                 HotelRoom.Name

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(24, "ValueChanged", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.String>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.String>(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value =>  HotelRoom.Name = __value,  HotelRoom.Name))));
                __builder2.AddAttribute(25, "ValueExpression", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<System.String>>>(() =>  HotelRoom.Name));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(26, "\r\n                        ");
                __Blazor.BlazorServer.Pages.HotelRoom.UpsertRoom.TypeInference.CreateValidationMessage_0(__builder2, 27, 28, 
#nullable restore
#line 22 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                ()=>HotelRoom.Name

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(29, "\r\n                   \r\n                    ");
                __builder2.OpenElement(30, "div");
                __builder2.AddAttribute(31, "class", "form-group");
                __builder2.AddMarkupContent(32, "<label> Hotel Room Occupancy</label>\r\n                        ");
                __Blazor.BlazorServer.Pages.HotelRoom.UpsertRoom.TypeInference.CreateInputNumber_1(__builder2, 33, 34, "form-control", 35, 
#nullable restore
#line 27 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                   HotelRoom.Occupancy

#line default
#line hidden
#nullable disable
                , 36, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value =>  HotelRoom.Occupancy = __value,  HotelRoom.Occupancy)), 37, () =>  HotelRoom.Occupancy);
                __builder2.AddMarkupContent(38, "\r\n                        ");
                __Blazor.BlazorServer.Pages.HotelRoom.UpsertRoom.TypeInference.CreateValidationMessage_2(__builder2, 39, 40, 
#nullable restore
#line 28 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                ()=>HotelRoom.Occupancy

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(41, "\r\n                    ");
                __builder2.OpenElement(42, "div");
                __builder2.AddAttribute(43, "class", "form-group");
                __builder2.AddMarkupContent(44, "<label> Hotel Room RegularRate</label>\r\n                        ");
                __Blazor.BlazorServer.Pages.HotelRoom.UpsertRoom.TypeInference.CreateInputNumber_3(__builder2, 45, 46, "form-control", 47, 
#nullable restore
#line 32 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                   HotelRoom.RegularRate

#line default
#line hidden
#nullable disable
                , 48, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value =>  HotelRoom.RegularRate = __value,  HotelRoom.RegularRate)), 49, () =>  HotelRoom.RegularRate);
                __builder2.AddMarkupContent(50, "\r\n                        ");
                __Blazor.BlazorServer.Pages.HotelRoom.UpsertRoom.TypeInference.CreateValidationMessage_4(__builder2, 51, 52, 
#nullable restore
#line 33 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                ()=>HotelRoom.RegularRate

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(53, "\r\n                    ");
                __builder2.OpenElement(54, "div");
                __builder2.AddAttribute(55, "class", "form-group");
                __builder2.AddMarkupContent(56, "<label> Hotel Room SqFt</label>\r\n                        ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.InputText>(57);
                __builder2.AddAttribute(58, "class", "form-control");
                __builder2.AddAttribute(59, "Value", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 37 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                 HotelRoom.SqFt

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(60, "ValueChanged", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.String>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.String>(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value =>  HotelRoom.SqFt = __value,  HotelRoom.SqFt))));
                __builder2.AddAttribute(61, "ValueExpression", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<System.String>>>(() =>  HotelRoom.SqFt));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(62, "\r\n                        ");
                __Blazor.BlazorServer.Pages.HotelRoom.UpsertRoom.TypeInference.CreateValidationMessage_5(__builder2, 63, 64, 
#nullable restore
#line 38 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                ()=>HotelRoom.SqFt

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(65, "\r\n                    ");
                __builder2.OpenElement(66, "div");
                __builder2.AddAttribute(67, "class", "form-group");
                __builder2.AddMarkupContent(68, "<label> Hotel Room Details</label>\r\n                        ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.InputTextArea>(69);
                __builder2.AddAttribute(70, "class", "form-control");
                __builder2.AddAttribute(71, "Value", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 42 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                     HotelRoom.Details

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(72, "ValueChanged", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.String>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.String>(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value =>  HotelRoom.Details = __value,  HotelRoom.Details))));
                __builder2.AddAttribute(73, "ValueExpression", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<System.String>>>(() =>  HotelRoom.Details));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(74, "\r\n                        ");
                __Blazor.BlazorServer.Pages.HotelRoom.UpsertRoom.TypeInference.CreateValidationMessage_6(__builder2, 75, 76, 
#nullable restore
#line 43 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                ()=>HotelRoom.Details

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(77, "\r\n                    ");
                __builder2.OpenElement(78, "div");
                __builder2.AddAttribute(79, "class", "form-group");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.InputFile>(80);
                __builder2.AddAttribute(81, "OnChange", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Forms.InputFileChangeEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Forms.InputFileChangeEventArgs>(this, 
#nullable restore
#line 47 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                             HandleImgUpload

#line default
#line hidden
#nullable disable
                )));
                __builder2.AddAttribute(82, "multiple", true);
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(83, "\r\n                        ");
                __builder2.OpenElement(84, "div");
                __builder2.AddAttribute(85, "class", "row");
#nullable restore
#line 49 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                             if (IsProgressed)
                            {

#line default
#line hidden
#nullable disable
                __builder2.AddMarkupContent(86, "<div class=\"col-md-12\"><i class=\"material-icons spinner text-success  opacity-10\">\r\n                                    settings\r\n                                </i></div>");
#nullable restore
#line 57 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 58 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                             if (HotelRoom.ImageUrls != null && HotelRoom.ImageUrls.Count > 0)
                            {
                                int ser = 1;
                                foreach (var item in HotelRoom.ImageUrls)
                                {

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(87, "div");
                __builder2.AddAttribute(88, "class", "col-md-2 mt-2");
                __builder2.OpenElement(89, "div");
                __builder2.AddAttribute(90, "class", "room-img");
                __builder2.AddAttribute(91, "style", "background:url(" + (
#nullable restore
#line 64 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                                             item

#line default
#line hidden
#nullable disable
                ) + ")" + " 50%" + " 50%");
                __builder2.OpenElement(92, "span");
                __builder2.AddContent(93, 
#nullable restore
#line 65 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                           ser

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(94, "\r\n\r\n\r\n                                ");
                __builder2.OpenElement(95, "button");
                __builder2.AddAttribute(96, "type", "button");
                __builder2.AddAttribute(97, "class", "btn btn-danger mt-4");
                __builder2.AddAttribute(98, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 69 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                                                             ()=>HandleDeleteImg(item)

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddContent(99, "Delete");
                __builder2.CloseElement();
#nullable restore
#line 71 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                  ser++;

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
#nullable restore
#line 73 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                    
                                }
                            }

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(100, "\r\n                    ");
                __builder2.OpenElement(101, "button");
                __builder2.AddAttribute(102, "class", "btn btn-primary");
                __builder2.AddContent(103, 
#nullable restore
#line 78 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
                                                      Title

#line default
#line hidden
#nullable disable
                );
                __builder2.AddContent(104, " Room");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(105, "\r\n                    ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Routing.NavLink>(106);
                __builder2.AddAttribute(107, "class", "btn btn-info");
                __builder2.AddAttribute(108, "href", "hotel-room ");
                __builder2.AddAttribute(109, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddContent(110, "back to index");
                }
                ));
                __builder2.CloseComponent();
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 87 "C:\Users\ccc\source\repos\BlazorServer\BlazorServer\Pages\HotelRoom\UpsertRoom.razor"
       
    [Parameter]
    public int? Id { get; set; }
    public string Title { get; set; } = "Create";
    public HotelRoomDTO HotelRoom { get; set; } = new HotelRoomDTO();
    public HotelRoomImageDTO RoomImg { get; set; } = new HotelRoomImageDTO();
    public int RId { get; set; }

    public bool IsProgressed { get; set; } = false;

    public List<string> DeletedImgs { get; set; } = new List<string>();

    protected override async Task OnInitializedAsync()
    {
        if (Id!=null)
        {
            Title = "Update";
            HotelRoom = await hotelRep.GetHotelRoom(Id.Value);
            if (HotelRoom?.HotelRoomImages != null)
            {
                HotelRoom.ImageUrls = HotelRoom.HotelRoomImages.Select(i => i.ImgUrl).ToList();
            }

        }
        else
        {
            HotelRoom = new HotelRoomDTO();
            Title ="Create";
        }
    }
    private async Task HandleHotelRoom()
    {
        try
        {
            if (HotelRoom.Id !=0&&Title== "Update")
            {
                //update
                var updatedRoom =  await hotelRep.UpdateHotelRoom(HotelRoom);
                if (HotelRoom.ImageUrls!=null &&HotelRoom.ImageUrls.Any())
                {
                    if (DeletedImgs!=null && DeletedImgs.Any())
                    {
                        foreach (var item in DeletedImgs)
                        {
                            var imgName = item.Replace($"{manger.BaseUri}RoomImgs/", "");
                            var res = fileUploader.DeleteFile(imgName);
                            await imgRep.DealeteHotelRoomImageByImgName(item);

                        }
                    }
                    await AddHotelRoomImg(updatedRoom);
                }
                await jsRuntime.ToasterSucess("Updated sucessfully");

                manger.NavigateTo("hotel-room");

            }
            if (HotelRoom.Id==0 &&Title== "Create")
            {
                //create
                var isUnique = await hotelRep.IsHotelExists(HotelRoom.Name);
                if (isUnique != null)
                {
                    await jsRuntime.ToasterError("There is another room by this name");
                }
                else
                {
                    var createdRoom = await hotelRep.CreateHotelRoom(HotelRoom);

                    await AddHotelRoomImg(createdRoom);
                    await jsRuntime.ToasterSucess("Created sucessfully");



                    manger.NavigateTo("hotel-room");
                }
            }
        }
        catch (Exception ex)
        {

            throw ex;
        }


    }

    private async Task AddHotelRoomImg(HotelRoomDTO roomDTO)
    {

        foreach (var item in HotelRoom.ImageUrls)
        {
            if ( Title=="Create")
            {
                RoomImg = new HotelRoomImageDTO()
                {
                    ImgUrl = item,
                    RoomId = roomDTO.Id,

                };

                await imgRep.CreateHotelRoomImage(RoomImg);
            }
            else
            {
                if (HotelRoom.HotelRoomImages.Where(x => x.ImgUrl == item).Count() == 0)
                {
                    RoomImg = new HotelRoomImageDTO()
                    {
                        ImgUrl = item,
                        RoomId = roomDTO.Id,

                    };

                    await imgRep.CreateHotelRoomImage(RoomImg);

                }
            }


        }
    }

    private async Task HandleImgUpload(InputFileChangeEventArgs e)
    {
        try
        {
            var imgs = new List<string>();
            IsProgressed = true;
            if (e.GetMultipleFiles().Count > 0)
            {
                foreach (var item in e.GetMultipleFiles())
                {
                    System.IO.FileInfo fileInfo = new System.IO.FileInfo(item.Name);
                    if (fileInfo.Extension.ToLower() == ".jpg" || fileInfo.Extension.ToLower() == ".jpeg" || fileInfo.Extension.ToLower() == ".png")
                    {
                        var filePath = await fileUploader.UploadFile(item);
                        imgs.Add(filePath);
                    }
                    else
                    {
                        await jsRuntime.ToasterError("Select .Jpg  , png , jpg");

                    }
                }
                // اللي فوق متملتش array الايرور هنا هيحصل ان ال
                //    بمعني اني معرفتش اعمل ابلود للصور 
                if (imgs.Any())
                {
                    if (HotelRoom.ImageUrls != null && HotelRoom.ImageUrls.Any())
                    {
                        HotelRoom.ImageUrls.AddRange(imgs);
                    }
                    else
                    {
                        HotelRoom.ImageUrls = new List<string>();
                        HotelRoom.ImageUrls.AddRange(imgs);
                    }
                }
                else
                {
                    await jsRuntime.ToasterError("Can't Upload Photos");
                }

            }
            IsProgressed = false;

        }
        catch (Exception ex)
        {

            await jsRuntime.ToasterError(ex.Message);
        }
    }
    private async Task HandleDeleteImg(string imgUrl)
    {
        try
        {
            var imgIndex = HotelRoom.ImageUrls.FindIndex(x => x == imgUrl);
            var imgName = imgUrl.Replace($"{manger.BaseUri}RoomImgs/", "");
            if (HotelRoom.Id==0 &&Title == "Create")
            {
                fileUploader.DeleteFile(imgName);

            }
            else if(HotelRoom.Id != 0 && Title == "Update")
            {
                DeletedImgs??= new List<string>();
                DeletedImgs.Add(imgUrl);

            }
            HotelRoom.ImageUrls.RemoveAt(imgIndex);
        }
        catch (Exception ex)
        {

            await jsRuntime.ToasterError(ex.Message);
        }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IFileUploader fileUploader { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime jsRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IRoomImgRep imgRep { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager manger { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IHotelRep hotelRep { get; set; }
    }
}
namespace __Blazor.BlazorServer.Pages.HotelRoom.UpsertRoom
{
    #line hidden
    internal static class TypeInference
    {
        public static void CreateValidationMessage_0<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
        public static void CreateInputNumber_1<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, System.Object __arg0, int __seq1, TValue __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg2, int __seq3, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg3)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.InputNumber<TValue>>(seq);
        __builder.AddAttribute(__seq0, "class", __arg0);
        __builder.AddAttribute(__seq1, "Value", __arg1);
        __builder.AddAttribute(__seq2, "ValueChanged", __arg2);
        __builder.AddAttribute(__seq3, "ValueExpression", __arg3);
        __builder.CloseComponent();
        }
        public static void CreateValidationMessage_2<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
        public static void CreateInputNumber_3<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, System.Object __arg0, int __seq1, TValue __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg2, int __seq3, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg3)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.InputNumber<TValue>>(seq);
        __builder.AddAttribute(__seq0, "class", __arg0);
        __builder.AddAttribute(__seq1, "Value", __arg1);
        __builder.AddAttribute(__seq2, "ValueChanged", __arg2);
        __builder.AddAttribute(__seq3, "ValueExpression", __arg3);
        __builder.CloseComponent();
        }
        public static void CreateValidationMessage_4<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
        public static void CreateValidationMessage_5<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
        public static void CreateValidationMessage_6<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
    }
}
#pragma warning restore 1591
